OIDC_PROVIDER=$(aws eks describe-cluster --name missael-hire-project --region us-east-1 --query "cluster.identity.oidc.issuer" --output text | sed -e "s/^https:\/\///")

9e99a48a9960b14926bb7f3b02e22da2b0ab7280

aws eks update-kubeconfig --region us-east-1 --name missael-hire-project
cat $HOME/.kube/config
kubectl create namespace missael

kubectl create -f service_account.yaml
kubectl annotate serviceaccount -n missael missael-service-account eks.amazonaws.com/role-arn=arn:aws:iam::734647218919:role/missael-hire-project-s3

kubectl get all

│ An error occurred (InvalidIdentityToken) when calling the AssumeRoleWithWebIdentity operation: OpenIDConnect provider's HTTPS certificate doesn't match configured thumbprint         │
https://github.com/terraform-aws-modules/terraform-aws-eks/issues/2542#issuecomment-1505921443
Error fixed recreating manually the OIDC


kubectl apply -f proxy.yaml -n missael
kubectl apply -f proxy_service.yaml -n missael

helm template -n missael missael-hire-project . -f ./values.yaml --debug
helm upgrade -n missael missael-hire-project . --install -f ./values.yaml

kubectl config view --raw >~/.kube/config

helm install aws-load-balancer-controller eks/aws-load-balancer-controller -n kube-system --set clusterName=missael-hire-project --set serviceAccount.create=false --set serviceAccount.name=aws-load-balancer-controller
